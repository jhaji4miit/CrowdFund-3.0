<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>CrowdFund dApp</title>

  <!-- Styles -->
  <link rel="stylesheet" href="style.css" />

  <!-- Ethers v5 -->
  <script src="https://cdn.jsdelivr.net/npm/ethers@5/dist/ethers.min.js"></script>

  <!-- dApp Logic -->
  <script defer src="app.js"></script>
</head>
<body>
  <!-- ðŸ…°ï¸ WELCOME SCREEN ------------------------------------------------ -->
  <section id="welcome" class="center">
    <img src="assets/logo.png" alt="CrowdFund Logo" class="logo-welcome" />
    <h1>CrowdFund</h1>
    <p class="subtitle">Transparent â€¢ Secure â€¢ Decentralized</p>
    <button class="primary" onclick="initApp()">Enter dApp</button>
  </section>

  <!-- ðŸ…±ï¸ MAIN DASHBOARD ----------------------------------------------- -->
  <main id="app" class="hidden">

    <!-- Header + quick nav -->
    <header class="glass">
      <div class="brand">
        <img src="assets/logo.png" alt="logo" class="logo-small" />
        <h2>Dashboard</h2>
      </div>

      <nav>
        <a href="#status">Status</a>
        <a href="#actions">Contribute</a>
        <a href="#details">Details</a>
        <a href="#admin">Admin</a>
      </nav>

      <button id="connectWalletBtn" class="primary" onclick="connectWallet()">Connect</button>
    </header>

    <!-- ðŸ“Š STATUS CARD -->
    <section id="status" class="card glass">
      <h3>Campaign Status</h3>
      <div class="grid">
        <div><span>Goal</span><strong id="goal">-</strong> ETH</div>
        <div><span>Raised</span><strong id="raised">-</strong> ETH</div>
        <div><span>Time Left</span><strong id="timeLeft">-</strong>s</div>
        <div><span>Active</span><strong id="activeStatus">-</strong></div>
      </div>

      <div class="progress-wrap">
        <div id="progressBar" class="progress"></div>
      </div>
    </section>

    <!-- ðŸ’¸ CONTRIBUTION CARD -->
    <section id="actions" class="card glass">
      <h3>Contribute</h3>
      <div class="flex">
        <input type="number" id="amount" placeholder="ETH amount" min="0.001" step="0.001" />
        <button class="primary" onclick="contribute()">Contribute</button>
      </div>

      <h4>After Deadline</h4>
      <div class="flex">
        <button onclick="refund()">Refund</button>
        <button onclick="withdraw()">Withdraw (Owner)</button>
      </div>
    </section>

    <!-- ðŸ“‹ DETAILS CARD -->
    <section id="details" class="card glass">
      <h3>Your Stats</h3>
      <ul class="stat-list">
        <li>Your Contribution: <strong id="yourContribution">-</strong> ETH</li>
        <li>Contribution %: <strong id="percent">-</strong>%</li>
        <li>Top Contributor: <strong id="topContributor">-</strong></li>
        <li>Avg Contribution: <strong id="average">-</strong> ETH</li>
        <li>Total Contributors: <strong id="contributorCount">-</strong></li>
        <li>Remaining Goal: <strong id="remainingGoal">-</strong> ETH</li>
      </ul>
    </section>

    <!-- ðŸ› ï¸ ADMIN CARD (owner only, auto-hidden in JS) -->
    <section id="admin" class="card glass admin-only hidden">
      <h3>Admin Controls</h3>

      <div class="field">
        <label>Extend Deadline (days)</label>
        <input type="number" id="extraDays" min="1" />
        <button onclick="extendDeadline()">Extend</button>
      </div>

      <div class="field">
        <label>Transfer Ownership (address)</label>
        <input type="text" id="newOwner" placeholder="0xâ€¦" />
        <button onclick="transferOwnership()">Transfer</button>
      </div>

      <div class="field">
        <label>Reset Campaign</label>
        <input type="number" id="newGoal" placeholder="New Goal ETH" />
        <input type="number" id="newDuration" placeholder="Duration days" />
        <button onclick="resetCampaign()">Reset</button>
      </div>
    </section>

    <!-- ðŸ” EXTRA TOOLS -->
    <section class="card glass">
      <h3>Extra Info</h3>
      <div class="flex">
        <button onclick="getAllContributors()">List Contributors</button>
        <button onclick="getContributionData()">Full Contributions</button>
        <button onclick="getRemaining()">Remaining Goal</button>
      </div>
    </section>

    <!-- Footer -->
    <footer>
      <small>
        Contract: 0x824956bbdAa68005C90a0387efeB67C23adf4C26 | Core DAO Â©2025
      </small>
    </footer>
  </main>
</body>
</html>
